<%= render 'shared/navbarback' %>
<div class='card indigo text-white'>
  <div class='card-body'>
    <h2 class='font-up font-bold py-4 text-white'>Projects</h2>

    <div class="d-flex justify-content-between bd-highlight mb-2">
      <div class='p-2 bd-highlight'>
        <%= link_to 'New Project', new_decide_project_path, class: 'btn btn-outline-white waves-effect waves-light' %>
      </div>
      <div class='p-2 bd-highlight'>
        <div class='form-inline d-flex flex-row-reverse'>
          <div class='form-group'>
            <%= form_tag(decide_projects_path, method: :get) do %>
              <%= text_field_tag :title, params[:title],
                class: 'form-control indigo text-white' %>
              <%= submit_tag 'Search', title: nil, class: 'btn btn-outline-white waves-effect waves-light' %>
            <% end %>
          </div>
        </div>
      </div>
    </div>

    <%= page_entries_info @projects %>
    <table class='table table-condensed table-hover table-striped text-white'>
      <thead>
        <tr>
          <th>Project Information</th>
        </tr>
      </thead>

      <tbody>
        <% @projects.each do |project| %>
          <tr>
            <td>
              <div class='row'>
                <div class='col'>
                  <div class='form-group text-white'>
                    <b>Title: </b><%= project.title %>
                  </div>
                  <div class='form-group text-white'>
                    <b>Hours Spent: </b><%= project.hours %>
                  </div>
                  <div class='form-group text-white'>
                    <b>Total Payment: </b><%= project.payment %>
                  </div>
                  <div class='form-group text-white'>
                    <b>Manager: </b><%= project.manager.name %>
                  </div>
                  <div class='form-group text-white'>
                    <b>Creator: </b><%= project.creator.name %>
                  </div>
                  <div class='form-group text-white'>
                    <b>Client: </b><%= project.client.name %>
                  </div>
                </div>
                <div class='col'>
                  <div class='float-right'>
                    <% unless Projects_User.where('user_id = ? AND project_id = ?', current_user.id, project.id).blank? %>
                      <div class='form-group'>
                        <%= link_to 'Log Time', new_decide_time_log_path_project(project), class: 'btn btn-outline-white waves-effect waves-light custom-button-size' %>
                      </div>
                    <% end %>
                    <div class='form-group'>
                      <%= link_to 'Show', decide_project_path(project), class: 'btn btn-outline-white waves-effect waves-light custom-button-size' %>
                    </div>
                    <% unless current_user.user? %>
                      <div class='form-group'>
                        <%= link_to 'Edit', edit_decide_project_path(project),
                          class: 'btn btn-outline-white waves-effect waves-light custom-button-size' %>
                      </div>
                      <%= link_to 'Destroy', decide_project_path(project), method: :delete, data: { confirm: 'Are you sure?' }, class: 'btn btn-outline-white waves-effect waves-light red custom-button-size' %>
                    <% end %>
                  </div>
                </div>
              </div>
              </td>
          </tr>
        <% end %>
      </tbody>
    </table>
    <%= paginate @projects, theme: 'twitter-bootstrap-4' %>
  </div>
</div>
