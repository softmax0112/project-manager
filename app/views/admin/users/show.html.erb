<%= render 'shared/user' %>
<h3>Administrative Console</h3>

<div class='indigo text-white'>
  <div class='card-body'>
    <div class="d-flex justify-content-between bd-highlight mb-2">
      <div class='p-2 bd-highlight'>
        <%= link_to 'New User', new_admin_user_path, class: 'btn btn-primary' %>
      </div>
      <div class='p-2 bd-highlight'>
        <div class='form-inline d-flex flex-row-reverse'>
          <div class='form-group'>
            <%= form_tag(admin_user_path(current_user), method: :get) do %>
              <%= text_field_tag :name, params[:name], class: 'form-control' %>
              <%= submit_tag 'Search', name: nil, class: 'btn btn-primary' %>
            <% end %>
          </div>
        </div>
      </div>
    </div>

    <%= page_entries_info @users, entry_name: 'user' %>
    <table class='table table-condensed table-hover table-striped text-white'>
      <tr>
        <th>User Information</th>
      </tr>

      <% @users.each do |user| %>
        <tr>
          <td>
            <div class='row'>
              <div class='col sm-6'>
                <div class='row'>
                  <div class='col'>
                    <%= image_tag image_url_validate(user.image_url.to_s), class: 'img-thumbnail' %>
                  </div>
                  <div class='col'>
                    <div class='float-left'>
                      <div class='form-group text-white'>
                        <b> Name: </b>
                        <%= user.name %>
                      </div>
                      <div class='form-group text-white'>
                        <b> E-mail: </b>
                        <%= user.email %>
                      </div>
                      <div class='form-group text-white'>
                        <b> Role: </b>
                        <%= user.role %>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class='col'>
                <div class='float-right'>
                  <%= link_to 'Edit User', edit_admin_user_path(user),
                    class: 'btn btn-primary' %>
                  <%= link_to enable_or_disable(user), toggle_admin_user_path(user),
                    method: :put, data: { confirm: 'Are you sure?' },
                    class: 'btn btn-primary' %>
                </div>
              </div>
            </div>
          </td>
        </tr>
      <% end %>
    </table>
    <%= paginate @users, theme: 'twitter-bootstrap-4' %>
  </div>
</div>
